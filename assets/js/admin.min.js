jQuery(document).ready((function(a){a("ul.wsn-tabs-nav li.wsn-tabs-nav-item").click((function(){var t=a(this).attr("data-tab"),e=a(this).attr("data-type");a(this).closest(".wsn-tabs").find(".wsn-tabs-nav-item").removeClass("wsn-tabs-nav-item--current"),a(this).closest(".wsn-tabs").find(".wsn-tabs__content").removeClass("wsn-tabs__content--current"),a(this).addClass("wsn-tabs-nav-item--current"),a("#"+t).addClass("wsn-tabs__content--current ");var n=a(this).closest(".wsn-tabs").find(".wsn-tabs__action");"archived"===e?n.addClass("wsn-hidden"):n.removeClass("wsn-hidden")})),a(".wsn-archived-list").on("click","a.removeArchivedUser",(function(t){t.preventDefault();var e=a(this),n=e.data("uid"),s=e.data("pid"),i=e.closest(".wsn-tab-table-item"),d=e.closest(".wsn-tab-table"),l={action:"archive_function",product:s,user_id:n,type:"_remove"};jQuery.post(ajaxurl,l,(function(){l&&i.fadeOut(1e3,(function(){i.remove(),d.find(".wsn-tab-table-body .wsn-tab-table-item").length<=0&&d.find(".wsn-notice").removeClass("wsn-hidden")}))}))})),a(".wsn-archived-list").on("click","a.restoreEmail",(function(t){t.preventDefault();var e=a(this),n=e.data("uid"),s=e.data("pid"),i=e.closest(".wsn-tab-table-item"),d=e.closest(".wsn-tab-table"),l={action:"archive_function",product:s,user_id:n,type:"_restore"};jQuery.post(ajaxurl,l,(function(a){a&&i.fadeOut(1e3,(function(){i.remove(),d.find(".wsn-tab-table-body .wsn-tab-table-item").length<=0&&d.find(".wsn-notice").removeClass("wsn-hidden")}))}))})),a("a.close_archived").click((function(t){t.preventDefault();var e=a(this),n=e.attr("id");a("#form"+n).hide(),e.parents().find(".waitlist_data#"+n).show(),e.parents().find(".archived_data_panel#"+n).find("._archive_userlist").html(""),e.parents().find(".archived_data_panel#"+n).hide()})),a(".wsn-tab-table").on("click","a.removeUser",(function(t){t.preventDefault();var e=a(this),n=e.data("product_id"),s=e.data("email"),i=e.data("uid"),d=e.data("total"),l=e.data("wp_nonce"),o=e.data("action"),r=a("#row-"+i+"-"+n),c=r.closest(".wsn-tab-table"),u={action:"removeUser",security:l,p_id:n,wsn_email:s,inc:d,wp_action:o};jQuery.post(ajaxurl,u,(function(){r.fadeOut(1e3,(function(){r.remove(),c.find(".wsn-tab-table-body .wsn-tab-table-item").length<=0&&c.find(".wsn-notice").removeClass("wsn-hidden")}))}))})),a("a#wsn_add_new_user").on("click",(function(t){t.preventDefault();var e=a(this).data("product_id");a("#wsn-add-user-"+e).show(),a("#wsn-add-tabs-"+e).hide(),a(this).parent().find(".usrEmail#"+e).focus()})),a("a#wsn_hide_add_new_user").on("click",(function(t){t.preventDefault();var e=a(this).data("product_id");a("#wsn-add-user-"+e).hide(),a("#wsn-add-tabs-"+e).show()})),a("button#wsn_add_btn").on("click",(function(t){t.preventDefault();var e=a(this),n=e.data("product_id"),s=e.closest(".wsn-form").find("#user-email-field-"+n);s.addClass("disabled"),e.addClass("disabled");var i=e.closest(".wsn-form").find("#wsn_hide_add_new_user"),d=s.val(),l=e.data("total"),o=l+1,r=e.data("nonce"),c=a("#wsn-tab-table-"+n);s.val("");var u={action:"addNewUser",security:r,p_id:n,inc:o,email:d};return d?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(d)?void jQuery.post(ajaxurl,u,(function(t){var o=JSON.parse(t);switch(s.removeClass("disabled"),e.removeClass("disabled"),o.status){case"success":l+=1,e.data("total",l),e.parents().find(".no_user#"+n).hide(),a("#wsn-tab-table-"+n+" > .wsn-tab-table-body").append('<div class="wsn-tab-table-item" id="row-'+o.currentId+"-"+n+'">\n<div class="wsn-tab-table-item-col">'+o.email+'</div>\n<div class="wsn-tab-table-item-col">\n<div class="wsn-tab-table-item-col-actions">\n<div class="wsn-tab-table-item-col-action">'+o.emailLink+'</div>\n<div class="wsn-tab-table-item-col-action">'+o.removeLink+"</div>\n</div>\n</div>\n</div>"),c.find(".wsn-notice").addClass("wsn-hidden"),i.click(),a("#wsn-tab-table-"+n+" .wsn-tab-table-item:last").animate({backgroundColor:"rgb(247, 255, 176)"},"slow").animate({backgroundColor:"#fff"},"slow");break;case"exists":alert(d+" is already exist! "),s.focus()}})):(alert("Please enter valid email address"),s.focus(),!1):(alert("Please enter email address."),!1)})),a(".wsn-tab-table").on("click","a.wsn_waitlist_send_mail_btn",(function(t){t.preventDefault();var e=a(this),n=e.data("product_id"),s=e.data("user_email"),i=e.data("type"),d="all"==i?e.parent(".wsn-tab-table"):e.parents(".wsn-tab-table-item-col-action");"all"==i&&a(document).find("#waitlists-"+n).find("tr.old").addClass("unclickable"),d.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),a.ajax({url:_wsn_waitlist.ajax_url,dataType:"json",data:{action:"wsn_waitlist_send_mail",product:n,email:s,type:i},success:function(a){d.html(a.msg),d.unblock()}})})),a(".wsn-tabs").on("click","a.wsn-send-email-all-users",(function(t){t.preventDefault();var e=a(this).data("product_id"),n=a(document).find("#wsn-tab-table-"+e);n.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),a.ajax({url:_wsn_waitlist.ajax_url,dataType:"json",data:{action:"wsn_waitlist_send_mail",product:e,type:"all"},success:function(a){n.html(a.msg),n.unblock()}})})),a(document).find("form.variations_form").on("woocommerce_variation_has_changed",(function(){var t=a(document).find("#wsn_waitlist_email"),e=t.parents(".wsn_waitlist_form").find("a.btn");t.on("input",(function(n){var s=e.attr("href"),i=t.val(),d=a(".variation_id").val(),l=t.attr("name");e.prop("href",s+"&"+l+"="+i+"&var_id="+d)}))}))}));
//# sourceMappingURL=admin.min.js.map